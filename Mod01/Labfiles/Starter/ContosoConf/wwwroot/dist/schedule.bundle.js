/*! For license information please see schedule.bundle.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.createElement("div");n.innerHTML=this.getTemplateHtml(e),this.templateElement=this.findTemplateElementInDiv(n)},(n=[{key:"createElement",value:function(t){var e=this.templateElement.cloneNode(!0);return this.dataBindElement(e,t),e}},{key:"getTemplateHtml",value:function(t){return document.getElementById(t).textContent}},{key:"findTemplateElementInDiv",value:function(t){for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e}},{key:"dataBindElement",value:function(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=t.querySelector("[data-bind="+n+"]");o&&(o.textContent=r.toString())}}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){var e=t.split(":");return 60*parseInt(e[0],10)+parseInt(e[1],10)}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof c?r:c,l=Object.create(a.prototype);return s(l,"_invoke",function(n,r,o){var i,a,s,c=0,l=o||[],f=!1,y={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,a=0,s=t,y.n=n,u}};function h(n,r){for(a=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=y.p,p=i[2];n>3?(o=p===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(a=0,y.v=r,y.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,y.n=p,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),a=l,s=p;(e=a<2?t:s)||!f;){i||(a?a<3?(a>1&&(y.n=-1),h(a,s)):y.n=s:y.v=s);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=y.n<0)?s:n.call(r,y))!==u)break}catch(e){i=t,a=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),l}var u={};function c(){}function l(){}function f(){}e=Object.getPrototypeOf;var y=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),h=f.prototype=c.prototype=Object.create(y);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,o,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=f,s(h,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(h),s(h,o,"Generator"),s(h,r,function(){return this}),s(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:p}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function i(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},s(t,e,n,r)}function u(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var f=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.tracks=e.tracks,this.localStarStorage=n,this.scheduleItemTemplate=new r("schedule-item"),this.element=this.scheduleItemTemplate.createElement(e),this.starredClass="starred",n.isStarred(this.id)&&this.element.classList.add(this.starredClass),this.initializeElementClass(),this.initializeElementPosition(e.start,e.end),this.addStarClickEventHandler()},e=[{key:"initializeElementClass",value:function(){this.isInTrack(1)&&this.isInTrack(2)?this.element.classList.add("both-tracks"):this.isInTrack(1)?this.element.classList.add("track-1"):this.isInTrack(2)&&this.element.classList.add("track-2")}},{key:"initializeElementPosition",value:function(t,e){var n=o(t),r=o(e);this.element.style.top=2*(n-510)+"px",this.element.style.height=2*(r-n)+"px"}},{key:"addStarClickEventHandler",value:function(){this.element.querySelector(".star").addEventListener("click",this.toggleStar.bind(this),!1)}},{key:"isInTrack",value:function(t){return this.tracks.indexOf(t)>=0}},{key:"toggleStar",value:function(){this.isStarred()?this.unsetStar():this.setStar()}},{key:"isStarred",value:function(){return this.element.classList.contains(this.starredClass)}},{key:"unsetStar",value:function(){this.element.classList.remove(this.starredClass),this.postStarChange(!1),this.localStarStorage.removeStar(this.id)}},{key:"setStar",value:function(){this.element.classList.add(this.starredClass),this.postStarChange(!0),this.localStarStorage.addStar(this.id)}},{key:"postStarChange",value:(n=a().m(function t(e){var n,r,o,i;return a().w(function(t){for(;;)switch(t.n){case 0:return n=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),r={method:"POST",headers:n,body:"starred="+e},t.n=1,fetch("/schedule/star/"+this.id,r);case 1:if(o=t.v,!e){t.n=3;break}if(!o.ok){t.n=3;break}return t.n=2,o.json();case 2:i=t.v,this.updateStarCount(i.starCount),i.starCount>50&&alert("This session is very popular! Be sure to arrive early to get a seat.");case 3:return t.a(2)}},t,this)}),i=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)})},function(t){return i.apply(this,arguments)})},{key:"updateStarCount",value:function(t){this.element.querySelector(".star-count").textContent=t.toString()}},{key:"show",value:function(){this.element.style.display="block"}},{key:"hide",value:function(){this.element.style.display="none"}}],e&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,i}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return p(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],f=!1,y={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,s=0,u=t,y.n=n,a}};function h(n,r){for(s=n,u=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=y.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,y.v=r,y.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,y.n=p,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,u=p;(e=s<2?t:u)||!f;){i||(s?s<3?(s>1&&(y.n=-1),h(s,u)):y.n=u:y.v=u);try{if(c=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(f=y.n<0)?u:n.call(r,y))!==a)break}catch(e){i=t,s=1,u=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(p(e={},r,function(){return this}),e),f=c.prototype=s.prototype=Object.create(l);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,p(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=c,p(f,"constructor",c),p(c,"constructor",u),u.displayName="GeneratorFunction",p(c,o,"GeneratorFunction"),p(f),p(f,o,"Generator"),p(f,r,function(){return this}),p(f,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:y}})()}function p(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}p=function(t,e,n,r){function i(e,n){p(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},p(t,e,n,r)}function v(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var b=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.localStarStorage=n,this.items=[]},e=[{key:"startDownload",value:(n=h().m(function t(){var e,n;return h().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/schedule/list");case 1:return e=t.v,t.n=2,e.json();case 2:n=t.v,e.ok?this.downloadDone(n):this.downloadFailed();case 3:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){v(i,r,o,a,s,"next",t)}function s(t){v(i,r,o,a,s,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"downloadDone",value:function(t){this.addAll(t.schedule)}},{key:"downloadFailed",value:function(){alert("Could not retrieve schedule data at this time. Please try again later.")}},{key:"addAll",value:function(t){t.forEach(this.add,this)}},{key:"add",value:function(t){var e=new f(t,this.localStarStorage);this.items.push(e),this.element.appendChild(e.element)}}],e&&d(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}var k=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.localStorage=e,this.load()},(e=[{key:"addStar",value:function(t){this.isStarred(t)||(this.sessions.push(t),this.save())}},{key:"removeStar",value:function(t){var e=this.sessions.indexOf(t);e>=0&&(this.sessions.splice(e,1),this.save())}},{key:"isStarred",value:function(t){return this.sessions.indexOf(t)>=0}},{key:"load",value:function(){var t=this.localStorage.getItem("stars");if(t)try{this.sessions=JSON.parse(t)||[]}catch(t){this.sessions=[]}else this.sessions=[]}},{key:"save",value:function(){this.localStorage.setItem("stars",JSON.stringify(this.sessions))}}])&&g(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();new b(document.getElementById("schedule"),new k(localStorage)).startDownload()})();
//# sourceMappingURL=schedule.bundle.js.map